/*! https://github.com/leeoniya/plotty (v0.1.0) */
var uPlot=function(){"use strict";var t=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function e(t){return t.slice(0,3)}var r=n.map(e),i=t.map(e);function o(t){return(10>t?"0":"")+t}var a="getMonth",u="getHours",l={YYYY:function(t){return t.getFullYear()},YY:function(t){return(t.getFullYear()+"").slice(2)},MMMM:function(n){return t[n[a]()]},MMM:function(t){return i[t[a]()]},MM:function(t){return o(t[a]()+1)},M:function(t){return t[a]()+1},DD:function(t){return o(t.getDate())},D:function(t){return t.getDate()},WWWW:function(t){return n[t.getDay()]},WWW:function(t){return r[t.getDay()]},HH:function(t){return o(t[u]())},H:function(t){return t[u]()},h:function(t){var n=t[u]();return 0==n?12:n>12?n-12:n},AA:function(t){return 12>t[u]()?"AM":"PM"},aa:function(t){return 12>t[u]()?"am":"pm"},mm:function(t){return o(t.getMinutes())},m:function(t){return t.getMinutes()},ss:function(t){return o(t.getSeconds())},s:function(t){return t.getSeconds()},fff:function(t){return function(t){return(10>t?"00":100>t?"0":"")+t}(t.getMilliseconds())}};function c(t){for(var n,e=[],r=/\{([a-z]+)\}|[^{]+/iy;n=r.exec(t);)e.push("{"==n[0][0]?l[n[1]]:n[0]);return function(t){for(var n="",r=0;e.length>r;r++)n+="string"==typeof e[r]?e[r]:e[r](t);return n}}function f(t){var n=document,e=devicePixelRatio,r=Math,i=r.floor,o=r.round,a=r.ceil,u=r.min,l=r.max,f=r.pow,s=r.log10;if("string"==typeof t.format){var m=c(t.format);t.format=function(t){return m(new Date(1e3*t))}}var h=t.cursor;function v(t,n){return a(t/n)*n}var d=W("chart"),g=function(t,r){var i=n.createElement("canvas"),a=i.getContext("2d");return i.width=o(t*e),i.height=o(r*e),i.style.width=t+"px",i.style.height=r+"px",{can:i,ctx:a}}(t.width,t.height),y=g.can,p=g.ctx,x=W("x-labels",d);x.style.top=t.height+"px";var M=t.data,D=M[0].length,b=0,w=D-1,Y=t.series,C={};function W(t,e){var r=n.createElement("div");return null!=t&&(r.className=t),null!=e&&e.appendChild(r),r}function S(t,n,e){return null==t?t:o((1-(t-n.min)/(n.max-n.min))*e)}function T(t,n,e){return o((t-n.min)/(n.max-n.min)*e)}var k=40,A=60,F=A*A,E=24*F,P=[1,5,10,15,30,A,5*A,10*A,15*A,30*A,F,2*F,3*F,4*F,6*F,8*F,12*F,E,365*E];function H(n,r){for(b=n,w=r,function(t){t&&(C={}),C.t={min:M[0][b],max:M[0][w]},Y.forEach((function(t,n){!function(t,n){t in C||(C[t]={min:1/0,max:-1/0});for(var e=C[t],r=b;w>=r;r++)e.min=u(e.min,n[r]),e.max=l(e.max,n[r]);var o=s(e.max-e.min),a=i(o),c=f(10,a);e.min=u(function(t,n){return i(t/n)*n}(e.min,c),e.min),e.max=l(v(e.max,c),e.max)}(t.scale,M[n+1])}))}(!0),p.clearRect(0,0,y.width,y.height);x.firstChild;)x.firstChild.remove();!function(){for(var n=M[0][b],r=M[0][w],i=t.width/(r-n),a=0;P.length>a&&k>P[a]*i;a++);var u=P[a],l=new Date(1e3*n),f=+new Date(l.getFullYear(),l.getMonth(),l.getDate())/1e3,s=f+v(n-f,u),m=i*u,h=c(E>u?F>u?A>u?"{M}/{DD}\n{h}:{mm}:{ss}{aa}":"{M}/{DD}\n{h}:{mm}{aa}":"{M}/{DD}\n{h}{aa}":"{M}/{DD}");p.lineWidth=1,p.strokeStyle="#eee",p.beginPath();for(var d=s,g=(s-n)*i;r>=d;d+=u,g+=m){var D=W(null,x);D.textContent=h(new Date(1e3*d)),D.style.left=g+"px";var Y=o(g*e);p.moveTo(Y,0),p.lineTo(Y,y.height)}p.stroke()}(),function(){Y.forEach((function(t,n){!function(t,n,e,r,i){var o;p.lineWidth=1,p.strokeStyle=e;var a=!1;p.beginPath();for(var u=b;w>=u;u++){var l=T(t[u],r,y.width),c=S(n[u],i,y.height);null==c?(a=!0,p.moveTo(l,o)):(o=c,a?(p.moveTo(l,c),a=!1):p.lineTo(l,c))}p.stroke()}(M[0],M[n+1],t.color,C.t,C[t.scale])}))}()}H(b,w),d.appendChild(y);var J,R,z=requestAnimationFrame;h&&(J=W("vt",d),R=W("hz",d));var N=W("region",d),V=W("legend",d),X=[{color:t.color,label:t.label}].concat(Y).map((function(t){var n=W("label",V);return n.style.color=t.color,n.textContent=t.label+": -",n})),q=Y.map((function(t){var n=W("dot",d);return n.style.background=t.color,n})),B=!1;function L(n){return function(t,n,e,r){var o;e=e||0;for(var a=2147483647>=(r=r||n.length-1);r-e>1;)t>n[o=a?e+r>>1:i((e+r)/2)]?e=o:r=o;return t-n[e]>n[r]-t?r:e}(M[0][b]+n/t.width*(M[0][w]-M[0][b]),M[0],b,w)}function O(t,n,e){t.style.transform="translate("+n+"px,"+e+"px)"}function j(){B=!1,h&&(O(J,K,0),O(R,0,Q));var n=L(K),e=T(M[0][n],C.t,t.width);X[0].firstChild.nodeValue=t.label+": "+t.format(M[0][n]);for(var r=0;Y.length>r;r++){var i=S(M[r+1][n],C[Y[r].scale],t.height);O(q[r],e,i),X[r+1].firstChild.nodeValue=Y[r].label+": "+Y[r].format(M[r+1][n])}if(U){var o=u(G,K),a=l(G,K);N.style.left=o+"px",N.style.width=a-o+"px"}}var G=null,I=null,K=null,Q=null,U=!1,Z=y.getBoundingClientRect();function $(t,n,e){n.addEventListener(t,e,{passive:!0})}$("mousemove",y,(function(t){K=t.clientX-Z.left,Q=t.clientY-Z.top,B||(B=!0,z(j))})),$("mousedown",y,(function(t){G=t.clientX-Z.left,I=t.clientY-Z.top,U=!0})),$("mouseup",y,(function(){if(U=!1,K!=G||Q!=I){N.style.left=0,N.style.width=0;var t=u(G,K),n=l(G,K);H(L(t),L(n))}})),$("dblclick",y,(function(){0==b&&w==D-1||H(0,D-1)})),this.root=d}return f.fmtDate=c,f}();
