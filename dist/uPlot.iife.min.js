/*! https://github.com/leeoniya/plotty (v0.1.0) */
var uPlot=function(){"use strict";var n=["January","February","March","April","May","June","July","August","September","October","November","December"],t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function e(n){return n.slice(0,3)}var r=t.map(e),i=n.map(e);function o(n){return(10>n?"0":"")+n}var u="getMonth",a="getHours",c={YYYY:function(n){return n.getFullYear()},YY:function(n){return(n.getFullYear()+"").slice(2)},MMMM:function(t){return n[t[u]()]},MMM:function(n){return i[n[u]()]},MM:function(n){return o(n[u]()+1)},M:function(n){return n[u]()+1},DD:function(n){return o(n.getDate())},D:function(n){return n.getDate()},WWWW:function(n){return t[n.getDay()]},WWW:function(n){return r[n.getDay()]},HH:function(n){return o(n[a]())},H:function(n){return n[a]()},h:function(n){var t=n[a]();return t>12?t-12:t},AA:function(n){return 12>n[a]()?"AM":"PM"},aa:function(n){return 12>n[a]()?"am":"pm"},mm:function(n){return o(n.getMinutes())},m:function(n){return n.getMinutes()},ss:function(n){return o(n.getSeconds())},s:function(n){return n.getSeconds()},fff:function(n){return function(n){return(10>n?"00":100>n?"0":"")+n}(n.getMilliseconds())}};function l(n){for(var t,e=[],r=/\{([a-z]+)\}|[^{]+/iy;t=r.exec(n);)e.push("{"==t[0][0]?c[t[1]]:t[0]);return function(n){for(var t="",r=0;e.length>r;r++)t+="string"==typeof e[r]?e[r]:e[r](n);return t}}function f(n){var t=document,e=devicePixelRatio,r=Math,i=r.floor,o=r.round,u=r.ceil,a=r.min,c=r.max,f=r.pow,m=r.log10;if("string"==typeof n.format){var s=l(n.format);n.format=function(n){return s(new Date(1e3*n))}}var h=n.cursor,d=Y("chart"),v=function(n,r){var i=t.createElement("canvas"),u=i.getContext("2d");return i.width=o(n*e),i.height=o(r*e),i.style.width=n+"px",i.style.height=r+"px",{can:i,ctx:u}}(n.width,n.height),g=v.can,y=v.ctx,p=n.data,x=p[0].length,M=0,w=x-1,b=n.series,D={};function Y(n,e){var r=t.createElement("div");return null!=n&&(r.className=n),null!=e&&e.appendChild(r),r}function W(n,t,e){return null==n?n:o((1-(n-t.min)/(t.max-t.min))*e)}function C(n,t,e){return o((n-t.min)/(t.max-t.min)*e)}var S=40,T=[1,5,10,15,30,60,300,600,900,1800,3600,7200,10800,14400,21600,28800,43200,86400,31536e3];function k(n,t){M=n,w=t,function(n){n&&(D={}),D.t={min:p[0][M],max:p[0][w]},b.forEach((function(n,t){!function(n,t){n in D||(D[n]={min:1/0,max:-1/0});for(var e=D[n],r=M;w>=r;r++)e.min=a(e.min,t[r]),e.max=c(e.max,t[r]);var o=m(e.max-e.min),l=i(o),s=f(10,l);e.min=a(function(n,t){return i(n/t)*t}(e.min,s),e.min),e.max=c(function(n,t){return u(n/t)*t}(e.max,s),e.max)}(n.scale,p[t+1])}))}(!0),y.clearRect(0,0,g.width,g.height),function(){for(var n=p[0][M],t=g.width/(p[0][w]-n),e=0;T.length>e&&S>T[e]*t;e++);var r=T[e],i=new Date(1e3*n),o=-(n-+(i=new Date(i.getFullYear(),i.getMonth(),i.getDate()))/1e3)*t,u=t*r;y.lineWidth=1,y.strokeStyle="#eee",y.beginPath();for(var a=o+u;g.width>a;a+=u)y.moveTo(a,0),y.lineTo(a,g.height);y.stroke()}(),function(){b.forEach((function(n,t){!function(n,t,e,r,i){var o;y.lineWidth=1,y.strokeStyle=e;var u=!1;y.beginPath();for(var a=M;w>=a;a++){var c=C(n[a],r,g.width),l=W(t[a],i,g.height);null==l?(u=!0,y.moveTo(c,o)):(o=l,u?(y.moveTo(c,l),u=!1):y.lineTo(c,l))}y.stroke()}(p[0],p[t+1],n.color,D.t,D[n.scale])}))}()}k(M,w),d.appendChild(g);var A,F,E=requestAnimationFrame;h&&(A=Y("vt",d),F=Y("hz",d));var P=Y("region",d),H=Y("legend",d),J=[{color:n.color,label:n.label}].concat(b).map((function(n){var t=Y("label",H);return t.style.color=n.color,t.textContent=n.label+": -",t})),R=b.map((function(n){var t=Y("dot",d);return t.style.background=n.color,t})),z=!1;function N(t){return function(n,t,e,r){var o;e=e||0;for(var u=2147483647>=(r=r||t.length-1);r-e>1;)n>t[o=u?e+r>>1:i((e+r)/2)]?e=o:r=o;return n-t[e]>t[r]-n?r:e}(p[0][M]+t/n.width*(p[0][w]-p[0][M]),p[0],M,w)}function V(n,t,e){n.style.transform="translate("+t+"px,"+e+"px)"}function X(){z=!1,h&&(V(A,L,0),V(F,0,O));var t=N(L),e=C(p[0][t],D.t,n.width);J[0].firstChild.nodeValue=n.label+": "+n.format(p[0][t]);for(var r=0;b.length>r;r++){var i=W(p[r+1][t],D[b[r].scale],n.height);V(R[r],e,i),J[r+1].firstChild.nodeValue=b[r].label+": "+b[r].format(p[r+1][t])}if(j){var o=a(q,L),u=c(q,L);P.style.left=o+"px",P.style.width=u-o+"px"}}var q=null,B=null,L=null,O=null,j=!1,G=g.getBoundingClientRect();function I(n,t,e){t.addEventListener(n,e,{passive:!0})}I("mousemove",g,(function(n){L=n.clientX-G.left,O=n.clientY-G.top,z||(z=!0,E(X))})),I("mousedown",g,(function(n){q=n.clientX-G.left,B=n.clientY-G.top,j=!0})),I("mouseup",g,(function(){if(j=!1,L!=q||O!=B){P.style.left=0,P.style.width=0;var n=a(q,L),t=c(q,L);k(N(n),N(t))}})),I("dblclick",g,(function(){0==M&&w==x-1||k(0,x-1)})),this.root=d}return f.fmtDate=l,f}();
