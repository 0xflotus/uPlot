/*! https://github.com/leeoniya/plotty (v0.1.0) */
var uPlot=function(){"use strict";var n=["January","February","March","April","May","June","July","August","September","October","November","December"],t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function e(n){return n.slice(0,3)}var r=t.map(e),i=n.map(e);function o(n){return(10>n?"0":"")+n}var u="getMonth",a="getHours",l={YYYY:function(n){return n.getFullYear()},YY:function(n){return(n.getFullYear()+"").slice(2)},MMMM:function(t){return n[t[u]()]},MMM:function(n){return i[n[u]()]},MM:function(n){return o(n[u]()+1)},M:function(n){return n[u]()+1},DD:function(n){return o(n.getDate())},D:function(n){return n.getDate()},WWWW:function(n){return t[n.getDay()]},WWW:function(n){return r[n.getDay()]},HH:function(n){return o(n[a]())},H:function(n){return n[a]()},h:function(n){var t=n[a]();return 0==t?12:t>12?t-12:t},AA:function(n){return 12>n[a]()?"AM":"PM"},aa:function(n){return 12>n[a]()?"am":"pm"},mm:function(n){return o(n.getMinutes())},m:function(n){return n.getMinutes()},ss:function(n){return o(n.getSeconds())},s:function(n){return n.getSeconds()},fff:function(n){return function(n){return(10>n?"00":100>n?"0":"")+n}(n.getMilliseconds())}};function c(n){for(var t,e=[],r=/\{([a-z]+)\}|[^{]+/iy;t=r.exec(n);)e.push("{"==t[0][0]?l[t[1]]:t[0]);return function(n){for(var t="",r=0;e.length>r;r++)t+="string"==typeof e[r]?e[r]:e[r](n);return t}}function f(n){var t=document,e=devicePixelRatio,r=Math,i=r.floor,o=r.round,u=r.ceil,a=r.min,l=r.max,f=r.pow,h=r.log10;if("string"==typeof n.format){var m=c(n.format);n.format=function(n){return m(new Date(1e3*n))}}var s=n.cursor;function v(n,t){return u(n/t)*t}var d=T("chart"),g=function(n,r){var i=t.createElement("canvas"),u=i.getContext("2d");return i.width=o(n*e),i.height=o(r*e),i.style.width=n+"px",i.style.height=r+"px",{can:i,ctx:u}}(n.width,n.height),p=g.can,y=g.ctx,x=T("x-labels",d);x.style.top=n.height+"px";var M=T("y-labels",d),D=n.data,w=D[0].length,b=0,Y=w-1,C=n.series,W={};function T(n,e){var r=t.createElement("div");return null!=n&&(r.className=n),null!=e&&e.appendChild(r),r}function S(n,t,e){return null==n?n:o((1-(n-t.min)/(t.max-t.min))*e)}function k(n,t,e){return o((n-t.min)/(t.max-t.min)*e)}function A(n,t,e,r,i){for(var o=r/(t-n),u=0;e.length>u;u++)if(e[u]*o>=i)return e[u]}function F(n,t,e){for(var r=[],i=n;t>=i;i+=e)r.push(i);return r}var E=60,P=E*E,H=24*P;function J(n,t,e,r){var i=T(null,n);i.textContent=t,i.style[e]=r+"px"}function R(n){for(;n.firstChild;)n.firstChild.remove()}function z(t,r){b=t,Y=r,function(n){n&&(W={}),W.t={min:D[0][b],max:D[0][Y]},C.forEach((function(n,t){!function(n,t){n in W||(W[n]={min:1/0,max:-1/0});for(var e=W[n],r=b;Y>=r;r++)e.min=a(e.min,t[r]),e.max=l(e.max,t[r]);var o=h(e.max-e.min),u=i(o),c=f(10,u);e.min=a(function(n,t){return i(n/t)*t}(e.min,c),e.min),e.max=l(v(e.max,c),e.max)}(n.scale,D[t+1])}))}(!0),y.clearRect(0,0,p.width,p.height),R(x),R(M),function(){var t=W.t,r=function(t,e){var r=A(t,e,[1,5,10,15,30,E,5*E,10*E,15*E,30*E,P,2*P,3*P,4*P,6*P,8*P,12*P,H,365*H],n.width,40),i=new Date(1e3*t),o=+new Date(i.getFullYear(),i.getMonth(),i.getDate())/1e3;return F(o+v(t-o,r),e,r)}(D[0][b],D[0][Y]),i=function(n){var t=c(H>n?P>n?E>n?"{M}/{DD}\n{h}:{mm}:{ss}{aa}":"{M}/{DD}\n{h}:{mm}{aa}":"{M}/{DD}\n{h}{aa}":"{M}/{DD}");return function(n){return t(new Date(1e3*n))}}(r[1]-r[0]),u=W["%"],a=function(t,e){return F(t,e,A(t,e,[.01,.02,.05,.1,.2,.5,1,2,5,10,20,50,100,200,500,1e3,2e3,5e3,1e4,2e4,5e4,1e5,2e5,5e5,1e6,2e6,5e6,1e7,2e7,5e7,1e8,2e8,5e8,1e9],n.height,30))}(u.min,u.max),l=function(){return function(n){return n+"%"}}();y.lineWidth=1,y.strokeStyle="#eee",y.beginPath();for(var f=0;r.length>f;f++){var h=r[f],m=k(h,t,p.width);J(x,i(h),"left",o(m/e)),y.moveTo(m,0),y.lineTo(m,p.height)}for(var s=0;a.length>s;s++){var d=a[s],g=S(d,u,p.height);J(M,l(d),"top",o(g/e)),y.moveTo(0,g),y.lineTo(p.width,g)}y.stroke()}(),function(){C.forEach((function(n,t){!function(n,t,e,r,i){var o;y.lineWidth=1,y.strokeStyle=e;var u=!1;y.beginPath();for(var a=b;Y>=a;a++){var l=k(n[a],r,p.width),c=S(t[a],i,p.height);null==c?(u=!0,y.moveTo(l,o)):(o=c,u?(y.moveTo(l,c),u=!1):y.lineTo(l,c))}y.stroke()}(D[0],D[t+1],n.color,W.t,W[n.scale])}))}()}z(b,Y),d.appendChild(p);var N,V,X=requestAnimationFrame;s&&(N=T("vt",d),V=T("hz",d));var q=T("region",d),B=T("legend",d),L=[{color:n.color,label:n.label}].concat(C).map((function(n){var t=T("label",B);return t.style.color=n.color,t.textContent=n.label+": -",t})),O=C.map((function(n){var t=T("dot",d);return t.style.background=n.color,t})),j=!1;function G(t){return function(n,t,e,r){var o;e=e||0;for(var u=2147483647>=(r=r||t.length-1);r-e>1;)n>t[o=u?e+r>>1:i((e+r)/2)]?e=o:r=o;return n-t[e]>t[r]-n?r:e}(D[0][b]+t/n.width*(D[0][Y]-D[0][b]),D[0],b,Y)}function I(n,t,e){n.style.transform="translate("+t+"px,"+e+"px)"}function K(){j=!1,s&&(I(N,Z,0),I(V,0,$));var t=G(Z),e=k(D[0][t],W.t,n.width);L[0].firstChild.nodeValue=n.label+": "+n.format(D[0][t]);for(var r=0;C.length>r;r++){var i=S(D[r+1][t],W[C[r].scale],n.height);I(O[r],e,i),L[r+1].firstChild.nodeValue=C[r].label+": "+C[r].format(D[r+1][t])}if(_){var o=a(Q,Z),u=l(Q,Z);q.style.left=o+"px",q.style.width=u-o+"px"}}var Q=null,U=null,Z=null,$=null,_=!1,nn=p.getBoundingClientRect();function tn(n,t,e){t.addEventListener(n,e,{passive:!0})}tn("mousemove",p,(function(n){Z=n.clientX-nn.left,$=n.clientY-nn.top,j||(j=!0,X(K))})),tn("mousedown",p,(function(n){Q=n.clientX-nn.left,U=n.clientY-nn.top,_=!0})),tn("mouseup",p,(function(){if(_=!1,Z!=Q||$!=U){q.style.left=0,q.style.width=0;var n=a(Q,Z),t=l(Q,Z);z(G(n),G(t))}})),tn("dblclick",p,(function(){0==b&&Y==w-1||z(0,w-1)})),this.root=d}return f.fmtDate=c,f}();
